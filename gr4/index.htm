<!doctype html>
<html>
<head>
    <meta charset="utf-8" /> 
    <title>LITTERAE</title>
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">

    <script src="js/utils.js"></script>
    <script src="js/models.js"></script>
    <script src="js/canned.js"></script>
    <script src="js/index.js"></script>

    <script>
    var app;
    window.onload = function() {
        app = new LitteraeIndex(this.document.getElementById('content'));

        function letsNotDoThisForNow() {
            var text_rows = document.getElementsByClassName('text-row');
            for (var i = 0; i < text_rows.length; i++) {
                var sel_text_row = text_rows[i];
                sel_text_row.addEventListener('click', function() {
                    var href = this.dataset.href;
                    if (href) {
                        window.location.assign(href);
                    }
                });
            }

            var black_overlay = document.getElementById('black-overlay');
            var new_group_div = document.getElementById('new-group-div');
            var add_text_div = document.getElementById('add-text-div');

            document.getElementById('add-grp-btn').addEventListener('click', function () {
                Utils.show(black_overlay);
                Utils.show(new_group_div);
            });

            document.getElementById('btn-create-group').addEventListener('click', function() {
                Utils.hide(new_group_div);
                Utils.hide(black_overlay);
                var new_group_name = document.getElementById('new-group-name').value;
                var instructor = 'Ben Bitdiddle'
                var table = document.getElementById('groups-table');
                var row = table.insertRow(1);
                var cell0 = row.insertCell(0);
                var cell1 = row.insertCell(1);
                var cell2 = row.insertCell(2);
                var cell3 = row.insertCell(3);
                cell0.innerHTML = 'üçé';
                cell0.classList.add('instr-apple');
                cell1.innerHTML = new_group_name;
                cell2.innerHTML = instructor;
                cell3.innerHTML = '<button class="leave-grp-btn">Leave Group</button>';
            });

            document.getElementById('add-text-btn').addEventListener('click', function() {
                Utils.show(black_overlay);
                Utils.show(add_text_div);
                document.getElementById('add-text-heading').innerHTML = 'Add new text to ' + document.getElementById('selected-group').getElementsByTagName('td')[1].innerHTML;
            });

            document.getElementById('create-text-btn').addEventListener('click', function() {
                Utils.hide(add_text_div);
                Utils.hide(black_overlay);
                var new_text_name = document.getElementById('new-text-name').value;
                var table = document.getElementById('texts-table');
                var row = table.insertRow(0);
                var cell0 = row.insertCell(0);
                var cell1 = row.insertCell(1);
                cell0.innerHTML = new_text_name;
                cell1.innerHTML = '<button class="del-text-btn">Delete Text</button>'
            });


            black_overlay.addEventListener('click', function() {
                Utils.hide(new_group_div);
                Utils.hide(add_text_div);
                Utils.hide(black_overlay);
            });

            document.getElementById('texts-label').innerHTML = 'Texts in <u>' + document.getElementById('selected-group').getElementsByTagName('td')[1].innerHTML + '</u>';

            document.getElementById('groups-table-div').addEventListener('click', function (e) {
                var tr = document.getElementById('selected-group');
                var td = tr.getElementsByTagName("td");

                document.getElementById('texts-label').innerHTML = 'Texts in <u>' + td[1].innerHTML + '</u>';
            });
        }
    }


    </script>
    
</head>
<body>

<div id="black-overlay"></div>

<div id="header">
    <div id="logo">LITTERAE</div>
    <div id='main-tb'>
        <div id='btn-settings'></div>
        <div id='btn-user'>Ben Bitdiddle</div>
    </div>
</div>

<div id="content">

<div id="new-group-div">
    <h3>Create a new group</h3>
    <table id="new-group-table">
        <tr>
            <td>
             Group Name 
             <br/>
             <input id="new-group-name" type="text" placeholder="Harvard Latin 3">
            </td>
        </tr>
        <tr>
            <td>
            Invite to group 
            <br/>
            <input id="new-group-members" type="text" placeholder="member emails">
            </td>
        </tr>
        <tr>
            <td>
            <button id="btn-create-group">Create Group</button>
            </td>
        </tr>
    </table>
</div>

<div id="add-text-div">
    <h3 id="add-text-heading">Add a text to this group</h3>
    <table id="new-text-table">
        <tr>
            <td>
             Text Name 
             <br/>
             <input id="new-text-name" type="text" placeholder="Caesar - De Bello Gallico, Liber I, I">
            </td>
        </tr>
        <tr>
            <td>
            Text Content
            <br/>
            <textarea id="new-text-content" placeholder="Paste text here" rows="5"></textarea>
            </td>
        </tr>
        <tr>
            <td>
            <button id="create-text-btn">Add Text</button>
            </td>
        </tr>
    </table>
</div>


<div id="groups-div">
    <h3 id="groups-label" style="margin-bottom: 10px">Your Groups</h3>

    <div id="search-groups">
        <label>Search groups:
            <input id="group-search-input" type="text" placeholder="group name">
        </label>
        <button id="add-grp-btn">Add Group</button>
    </div>    

    <div id="groups-table-div"></div>
</div>

<div id="texts-div">
    <h3 id="texts-label" style="margin-bottom: 10px">Texts</h3>

    <div id="search-texts">
        <label>Search texts:
            <input id="text-search-input" type="text" placeholder="text name">
        </label>
        <button id="add-text-btn">Add Text</button>
    </div>    

    <div id="texts-table-div"></div> 
</div>

</div>


</div>
<div id="templates">
    <div id="tpl-grouplist">
        <table class="groups-table"><tbody>
            <tr class="heading-row">
                <th class="instr-apple"></th>
                <th>Group</th>
                <th>Instructor</th>
                <th></th>
            </tr>
        </tbody></table>
    </div>

    <div id="tpl-textlist">
        <table class="texts-table"><tbody>
            <tr class="heading-row">
                <th>title</th>
                <th></th>
            </tr>
        </tbody></table>
    </div>

    <table><tbody  id="tpl-groupitem">
        <tr>
            <td class="instr-apple">üçé</td>
            <td><span class="name">Harvard Latin 2</span></td>
            <td><span class="instructor">Professor Livingston</span></td>
            <td><button class="leave-grp-btn">Leave Group</button></td>
        </tr>
    </tbody></table>

    <table><tbody id="tpl-textitem">
        <tr class="text-row" data-href="app.htm">
            <td><span class="title">Caesar - De Bello Gallico, Liber I, I</span></td>
            <td><button class="del-text-btn">Delete Text</button></td>
        </tr>
    </tbody></table>
</div>
</body>
</html>